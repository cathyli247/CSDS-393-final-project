{"ast":null,"code":"import _defineProperty from\"/Users/gilgamesh/Desktop/code/393/sites/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"/Users/gilgamesh/Desktop/code/393/sites/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _classCallCheck from\"/Users/gilgamesh/Desktop/code/393/sites/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/gilgamesh/Desktop/code/393/sites/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _assertThisInitialized from\"/Users/gilgamesh/Desktop/code/393/sites/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"/Users/gilgamesh/Desktop/code/393/sites/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/gilgamesh/Desktop/code/393/sites/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from'react';import{Breadcrumb,BreadcrumbItem,Button,Form,FormGroup,FormFeedback,Modal,ModalHeader,ModalBody,Row,Col,Label,Input}from'reactstrap';import{Link}from'react-router-dom';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var config=require('../config');var BlogViewer=/*#__PURE__*/function(_Component){_inherits(BlogViewer,_Component);var _super=_createSuper(BlogViewer);function BlogViewer(props){var _this;_classCallCheck(this,BlogViewer);_this=_super.call(this,props);_this.handleBlur=function(field){return function(evt){_this.setState({touched:_objectSpread(_objectSpread({},_this.state.touched),{},_defineProperty({},field,true))});};};_this.state={id:'',title:'',author:'',blog_content:'',comments:[],newComment:'',isModalOpen:false,touched:{newComment:false}};_this.toggleModal=_this.toggleModal.bind(_assertThisInitialized(_this));_this.handleFav=_this.handleFav.bind(_assertThisInitialized(_this));_this.handleSubmit=_this.handleSubmit.bind(_assertThisInitialized(_this));_this.handleInputChange=_this.handleInputChange.bind(_assertThisInitialized(_this));_this.handleBlur=_this.handleBlur.bind(_assertThisInitialized(_this));return _this;}_createClass(BlogViewer,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;fetch(config.serverUrl+this.props.path,{method:'GET',headers:{'Content-Type':'application/json'}}).then(function(res){return res.json();}).then(function(data){_this2.setState({id:data.blog_id,title:data.title,author:data.author,blog_content:data.blog_content,comments:data.comments});});}},{key:\"toggleModal\",value:function toggleModal(){this.setState({isModalOpen:!this.state.isModalOpen});}},{key:\"handleInputChange\",value:function handleInputChange(event){var target=event.target;var value=target.value;var name=target.name;this.setState(_defineProperty({},name,value));}},{key:\"handleFav\",value:function handleFav(event){event.preventDefault();if(this.props.authenticated){var databody={\"fav\":this.state.blog_id,\"username\":this.props.username};fetch(config.serverUrl+this.props.path,{method:'PUT',body:JSON.stringify(databody),headers:{'Content-Type':'application/json'}}).then(function(res){return res.json();}).then(function(data){if(data.success)alert(\"This blog has been added to your Fav List!\");else alert(JSON.stringify(data.msg));});}else{alert(\"Please Sign up or Login first!\");}}},{key:\"handleSubmit\",value:function handleSubmit(event){var _this3=this;event.preventDefault();if(this.props.authenticated){var databody={\"comment_content\":this.state.newComment,\"username\":this.props.username};fetch(config.serverUrl+this.props.path,{method:'PUT',body:JSON.stringify(databody),headers:{'Content-Type':'application/json'}}).then(function(res){return res.json();}).then(function(data){if(data.success){alert(\"Successfully comment on this blog!\");_this3.toggleModal();}else alert(JSON.stringify(data.msg));});}else{alert(\"Please Sign up or Login first!\");}}},{key:\"validate\",value:function validate(newComment){var errors={newComment:''};if(this.state.touched.newComment&&newComment.length<1)errors.newComment='Comment is required';return errors;}},{key:\"render\",value:function render(){var errors=this.validate(this.state.newComment);return/*#__PURE__*/_jsxs(\"div\",{className:\"container\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:/*#__PURE__*/_jsxs(Breadcrumb,{children:[/*#__PURE__*/_jsx(BreadcrumbItem,{children:/*#__PURE__*/_jsx(Link,{to:{pathname:'/home',state:{search:this.props.location.state.search,category:this.props.location.state.category}},children:\"Search Results\"})}),/*#__PURE__*/_jsx(BreadcrumbItem,{active:true,children:this.state.title})]})}),/*#__PURE__*/_jsx(\"h1\",{style:{textAlign:\"center\"},children:this.state.title}),/*#__PURE__*/_jsxs(\"h2\",{style:{textAlign:\"center\"},children:[\"BY \",this.state.author]}),/*#__PURE__*/_jsxs(\"div\",{className:\"row\",style:{borderStyle:\"solid\",borderColor:\"#D7D7D7\",borderWidth:\"1px\",borderRadius:\"10px\",padding:\"20px\"},children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-12\",children:/*#__PURE__*/_jsx(\"p\",{children:this.state.blog_content})}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"div\",{className:\"col-9 col-md-3 offset-md-8\",children:/*#__PURE__*/_jsxs(Button,{id:\"post\",disabled:!this.props.authenticated,onClick:this.toggleModal,style:{background:\"rgba(10,48,78,0.41)\",width:\"100%\",fontFamily:\"Arial Black\",color:\"white\",border:\"none\"},children:[/*#__PURE__*/_jsx(\"i\",{class:\"fa fa-pencil\",\"aria-hidden\":\"true\"}),\" Post comment\"]})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-3 col-md-1\",children:/*#__PURE__*/_jsx(Form,{onSubmit:this.handleFav,class:\"form-style\",children:/*#__PURE__*/_jsx(Button,{type:\"submit\",value:\"submit\",style:{background:\"rgba(10,48,78,0.41)\",fontFamily:\"Arial Black\",border:\"none\",borderRadius:\"50%\"},children:/*#__PURE__*/_jsx(\"i\",{class:\"fa fa-heart\",\"aria-hidden\":\"true\"})})})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"row\",style:{marginTop:\"20px\"},children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-12\",children:/*#__PURE__*/_jsx(\"hr\",{className:\"seperation\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-12 col-md-6\",children:/*#__PURE__*/_jsx(\"p\",{style:{fontSize:\"16px\",fontFamily:\"Arial Black\"},children:\"Comments\"})})]}),this.state.comments.map(function(comment){return/*#__PURE__*/_jsxs(\"div\",{className:\"row\",style:{marginBottom:\"30px\",paddingLeft:\"20px\"},children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-12\",style:{marginTop:\"20px\"},children:/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Author: \"}),\" \",comment.username]})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-12\",children:/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Comment: \"}),\" \",comment.comment_content]})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-12\",style:{marginTop:\"-20px\"},children:/*#__PURE__*/_jsx(\"hr\",{style:{border:\"1px dashed #D7D7D7\"}})})]});}),/*#__PURE__*/_jsxs(Modal,{isOpen:this.state.isModalOpen,toggle:this.toggleModal,children:[/*#__PURE__*/_jsx(ModalHeader,{toggle:this.toggleModal,children:\"Post Your Comment\"}),/*#__PURE__*/_jsx(ModalBody,{children:/*#__PURE__*/_jsxs(Form,{onSubmit:this.handleSubmit,class:\"form-style\",children:[/*#__PURE__*/_jsx(Row,{children:/*#__PURE__*/_jsx(Col,{xs:12,children:/*#__PURE__*/_jsxs(FormGroup,{className:\"form-style-form-group\",children:[/*#__PURE__*/_jsx(Label,{htmlFor:\"newComment\",className:\"form-style-label\",children:\"Comment (Required)\"}),/*#__PURE__*/_jsx(Input,{type:\"textarea\",id:\"newComment\",name:\"newComment\",rows:\"5\",value:this.state.newComment,onChange:this.handleInputChange,valid:errors.newComment==='',invalid:errors.newComment!=='',onBlur:this.handleBlur('newComment')}),/*#__PURE__*/_jsx(FormFeedback,{children:errors.newComment})]})})}),/*#__PURE__*/_jsx(Row,{children:/*#__PURE__*/_jsx(Col,{sm:12,md:{size:6,offset:3},children:/*#__PURE__*/_jsx(FormGroup,{children:/*#__PURE__*/_jsx(Button,{disabled:this.state.newComment===''||errors.newComment!='',type:\"submit\",value:\"submit\",style:{background:\"#0A304E\",width:\"100%\",fontFamily:\"Arial Black\"},children:\"Submit\"})})})})]})})]})]});}}]);return BlogViewer;}(Component);export default BlogViewer;","map":{"version":3,"sources":["/Users/gilgamesh/Desktop/code/393/sites/src/components/BlogViewerComponent.js"],"names":["React","Component","Breadcrumb","BreadcrumbItem","Button","Form","FormGroup","FormFeedback","Modal","ModalHeader","ModalBody","Row","Col","Label","Input","Link","config","require","BlogViewer","props","handleBlur","field","evt","setState","touched","state","id","title","author","blog_content","comments","newComment","isModalOpen","toggleModal","bind","handleFav","handleSubmit","handleInputChange","fetch","serverUrl","path","method","headers","then","res","json","data","blog_id","event","target","value","name","preventDefault","authenticated","databody","username","body","JSON","stringify","success","alert","msg","errors","length","validate","pathname","search","location","category","textAlign","borderStyle","borderColor","borderWidth","borderRadius","padding","background","width","fontFamily","color","border","marginTop","fontSize","map","comment","marginBottom","paddingLeft","comment_content","size","offset"],"mappings":"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","sourcesContent":["import React, {Component} from 'react';\nimport {Breadcrumb, BreadcrumbItem, Button, Form, FormGroup, FormFeedback, Modal, ModalHeader, ModalBody, Row, Col, Label, Input} from 'reactstrap';\nimport {Link} from 'react-router-dom';\nvar config = require('../config');\n\nclass BlogViewer extends Component{\n    constructor(props){\n        super(props);\n        this.state={\n            id:'',\n            title:'',\n            author:'',\n            blog_content:'',\n            comments:[],\n            newComment:'',\n            isModalOpen: false,\n            touched: {\n                newComment: false\n            }\n        }\n        this.toggleModal = this.toggleModal.bind(this);\n        this.handleFav = this.handleFav.bind(this);\n        this.handleSubmit = this.handleSubmit.bind(this);\n        this.handleInputChange = this.handleInputChange.bind(this);\n        this.handleBlur = this.handleBlur.bind(this);\n    }\n\n    componentDidMount() {\n        fetch(config.serverUrl+this.props.path, {\n            method: 'GET',\n            headers: {\n                'Content-Type': 'application/json'\n            }\n        })\n        .then(res => res.json())\n        .then(data => {\n            this.setState({\n                id: data.blog_id,\n                title: data.title,\n                author: data.author,\n                blog_content: data.blog_content,\n                comments: data.comments\n            })\n        })\n    }\n\n    toggleModal(){\n        this.setState({\n            isModalOpen: !this.state.isModalOpen,\n        });\n    }\n\n    handleInputChange(event){\n        const target = event.target;\n        const value = target.value;\n        const name = target.name;\n\n        this.setState({\n            [name]: value\n        });\n    }\n\n    handleBlur = (field) => (evt) => {\n        this.setState({\n            touched: { ...this.state.touched, [field]: true },\n        });\n    }\n\n    handleFav(event){\n        event.preventDefault();\n        if(this.props.authenticated){\n            let databody = {\n                \"fav\": this.state.blog_id,\n                \"username\": this.props.username\n            }\n            fetch(config.serverUrl+this.props.path, {\n                method: 'PUT',\n                body: JSON.stringify(databody),\n                headers: {\n                    'Content-Type': 'application/json'\n                }\n            })\n            .then(res => res.json())\n            .then(data => {\n                if(data.success) alert(\"This blog has been added to your Fav List!\");\n                else\n                    alert(JSON.stringify(data.msg));\n            })\n        }\n        else{\n            alert(\"Please Sign up or Login first!\");\n        }\n    }\n\n    handleSubmit(event){\n        event.preventDefault();\n        if(this.props.authenticated){\n            let databody = {\n                \"comment_content\": this.state.newComment,\n                \"username\": this.props.username\n            }\n            fetch(config.serverUrl+this.props.path, {\n                method: 'PUT',\n                body: JSON.stringify(databody),\n                headers: {\n                    'Content-Type': 'application/json'\n                },\n            })\n            .then(res => res.json())\n            .then(data => {\n                if(data.success){\n                    alert(\"Successfully comment on this blog!\");\n                    this.toggleModal();\n                }\n                else\n                    alert(JSON.stringify(data.msg));\n            })\n        }\n        else{\n            alert(\"Please Sign up or Login first!\");\n        }\n    }\n\n    validate(newComment) {\n\n        const errors = {\n            newComment:''\n        };\n\n        if (this.state.touched.newComment && newComment.length < 1)\n            errors.newComment = 'Comment is required';\n\n        return errors;\n    }\n\n    render(){\n        const errors = this.validate(this.state.newComment);\n\n        return(\n            <div className=\"container\">\n                <div className=\"row\">\n                    <Breadcrumb>\n                        <BreadcrumbItem><Link to={{ pathname: '/home' , state: { search: this.props.location.state.search, category: this.props.location.state.category} }}>Search Results</Link></BreadcrumbItem>\n                        <BreadcrumbItem active>{this.state.title}</BreadcrumbItem>\n                    </Breadcrumb>                    \n                </div>\n                <h1 style={{textAlign:\"center\"}}>{this.state.title}</h1>\n                <h2 style={{textAlign:\"center\"}}>BY {this.state.author}</h2>\n                <div className=\"row\" style={{borderStyle:\"solid\", borderColor: \"#D7D7D7\", borderWidth:\"1px\",borderRadius:\"10px\", padding:\"20px\"}}>\n                    <div className=\"col-12\">\n                        <p>{this.state.blog_content}</p>\n                    </div>\n                    <br />\n                    <div className=\"col-9 col-md-3 offset-md-8\">\n                        <Button id=\"post\" disabled={!this.props.authenticated} onClick={this.toggleModal} style={{background:\"rgba(10,48,78,0.41)\", width:\"100%\", fontFamily:\"Arial Black\", color:\"white\", border:\"none\"}}>\n                            <i class=\"fa fa-pencil\" aria-hidden=\"true\"></i> Post comment\n                        </Button>\n                    </div>\n                    <div className=\"col-3 col-md-1\">\n                        <Form onSubmit={this.handleFav} class=\"form-style\">\n                            <Button type=\"submit\" value=\"submit\" style={{background:\"rgba(10,48,78,0.41)\", fontFamily:\"Arial Black\",border:\"none\", borderRadius: \"50%\"}}>\n                                <i class=\"fa fa-heart\" aria-hidden=\"true\"></i>\n                            </Button>\n                        </Form>\n                    </div>\n                </div>\n                <div className=\"row\" style={{marginTop: \"20px\"}}>\n                    <div className=\"col-12\">\n                        <hr className=\"seperation\" />\n                    </div>\n                    <div className=\"col-12 col-md-6\">\n                        <p style={{fontSize:\"16px\", fontFamily:\"Arial Black\"}}>Comments</p>\n                    </div>\n                </div>\n                {\n                    this.state.comments.map((comment) => {\n                        return (\n                            <div className=\"row\" style={{marginBottom:\"30px\", paddingLeft:\"20px\"}}>\n                                <div className=\"col-12\" style={{marginTop:\"20px\"}}>\n                                    <p><strong>Author: </strong> {comment.username}</p>\n                                </div>\n                                <div className=\"col-12\">\n                                    <p><strong>Comment: </strong> {comment.comment_content}</p>\n                                </div>\n                                <div className=\"col-12\" style={{marginTop:\"-20px\"}}>\n                                    <hr style={{border:\"1px dashed #D7D7D7\"}} />\n                                </div>\n                            </div>\n                        );\n                    })\n                }\n                <Modal isOpen={this.state.isModalOpen} toggle={this.toggleModal}>\n                    <ModalHeader toggle={this.toggleModal}>Post Your Comment</ModalHeader>\n                    <ModalBody>\n                        <Form onSubmit={this.handleSubmit} class=\"form-style\">\n                            <Row>\n                                <Col xs={12}>\n                                    <FormGroup className=\"form-style-form-group\">\n                                        <Label htmlFor=\"newComment\" className=\"form-style-label\">Comment (Required)</Label>\n                                        <Input type=\"textarea\" id=\"newComment\" name=\"newComment\" rows=\"5\" value={this.state.newComment} onChange={this.handleInputChange} valid={errors.newComment === ''} invalid={errors.newComment !== ''} onBlur={this.handleBlur('newComment')}/>\n                                        <FormFeedback>{errors.newComment}</FormFeedback>\n                                    </FormGroup>\n                                </Col>\n                            </Row>\n                            <Row>\n                                <Col sm={12} md={{size:6, offset:3}}>\n                                    <FormGroup>\n                                        <Button disabled={ this.state.newComment === '' || errors.newComment != ''} type=\"submit\" value=\"submit\" style={{background:\"#0A304E\", width:\"100%\", fontFamily:\"Arial Black\"}}>Submit</Button>\n                                    </FormGroup>\n                                </Col>\n                            </Row>\n                        </Form>\n                    </ModalBody>\n                </Modal>\n            </div>\n        );\n    }\n}\n\nexport default BlogViewer;"]},"metadata":{},"sourceType":"module"}